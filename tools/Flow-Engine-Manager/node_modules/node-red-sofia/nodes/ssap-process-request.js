
var sofia2 = require("../red/sofia2/sofia2-eventlistener-server.js");


module.exports = function(RED) {
	var request = require('sync-request');
	var sofia2Config = require('./config/sofia2-config');
	
    var listOntologiasUser = new Array();
    function obtenerOntologiasUsuario(user){
        debugger;
     console.log("entra en obtener ontologias");

    }











    function SsapProcessRequest(config) {
		RED.nodes.createNode(this,config);
        var node = this;
        
              
        //obtenerOntologiasUsuario(user);



		sofia2.registerSsapProcessRequestEventListeners(this);
		
		
		this.on('close', function() {
			sofia2.deRegisterSsapProcessRequestEventListeners(this);
		});
		
		this.on('notifySofia2Event', function(event){
			var msgRaw = {payload: event};
			
			var msgJson = {payload: JSON.parse(event)};
			
			node.send([msgRaw, msgJson]);
		});
    }
    RED.nodes.registerType("ssap-process-request",SsapProcessRequest);
	
}
