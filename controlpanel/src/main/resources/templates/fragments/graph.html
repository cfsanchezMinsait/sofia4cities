<!-- BEGIN GRAPH -->
<div th:fragment="graphFragment" id="graphFragment">
	
	<!-- GRAPH CSS -->
	<link rel="stylesheet" type="text/css" media="all" th:href="@{/static/vendor/vis/vis.min.css}"/>
		
	<!-- GRAPH SCRIPTS  -->	
	<script type="text/javascript" th:src="@{/static/vendor/vis/vis.min.js}"></script>
	<!-- <script type="text/javascript" th:src="@{/static/vendor/vis/grafo.js}"></script> -->
	
	<!-- GRAPH CONTROLLER JS -->
	<script th:src="@{/static/js/pages/graph.js}"/>	
	 
	<!-- BEGIN GRAPH INNER -->
	<div class="row">
		<div class="col-md-12">
			<div class="portlet light bordered">
				<div class="portlet-title">
					<div class="caption">
						<i class="flaticon-network font-grey-gallery"></i>
						<span class="caption-subject bold font-grey-gallery uppercase"> <span th:text="#{grafo_titulo_universo}"> Mi Universo Sofia4Cities </span></span>
					</div>									
					<div class="tools">
						<a href="" class="collapse" data-original-title="" title=""> </a>
						<a href="" class="fullscreen" data-original-title="" title=""> </a>										
					</div>									
				</div>
				<div class="portlet-body" style="display: block; height: auto; padding-top: 0px; ">
					
					<div class="row">						
						<div class="col-md-12 margin-bottom-20">
							<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 margin-bottom-10 margin-top-10 clearfix">
								<div id="id_panel_botones" class="btn-group  pull-right">
									<div class="btn-group">
										<button type="button" data-toggle="dropdown" aria-expanded="false" class="btn btn-primary btn-sm dropdown-toggle button_text">
											<i class="fa fa-ellipsis-horizontal"></i> <span th:text="#{grafo_clusterizacion}"></span>
											<i class="fa fa-angle-down"></i>
										</button>
										<ul id="clusterOptions" class="dropdown-menu">
											<li>
												<a href="javascript:;" data-action="source" th:text="#{grafo_fuente}"></a>
											</li>
											<li>
												<a href="javascript:;" data-action="type" th:text="#{grafo_tipo}"></a>
											</li>
										</ul>
									</div>
									<div class="btn-group">
										<button id="btn-addH" class="btn btn-primary btn-sm button_text"><i class="la la-plus"></i>&nbsp;</button>
										<button id="btn-remH" class="btn btn-primary btn-sm button_text"><i class="la la-minus"></i>&nbsp;</button>
										<button id="btn-resH" class="btn btn-primary btn-sm button_text"><i class="la la-refresh"></i>&nbsp;</button>
										<button type="button" data-toggle="dropdown" aria-expanded="false" class="btn btn-primary btn-sm dropdown-toggle button_text">
											<i class="fa fa-ellipsis-horizontal"></i> <span class="lang" th:text="#{grafo_jerarquia}" data-lang="btn-jerarquia"></span>
											<i class="fa fa-angle-down"></i>
										</button>
										<ul id="hierarchicalOptions" class="dropdown-menu">
											<li data-original-title="" class="tooltips lang" data-lang-tooltip="mnu-arr-aba">
												<a data-action="UD" href="javascript:;"> <i class="fa fa-arrow-up"></i> <span class="lang" th:text="#{grafo_arriba_abajo}" data-lang="mnu-arr-aba" ></span></a>
											</li>
											<li data-original-title="" class="tooltips lang" data-lang-tooltip="mnu-aba-arr">
												<a data-action="DU" href="javascript:;"> <i class="fa fa-arrow-down"></i> <span class="lang" th:text="#{grafo_abajo_arriba}" data-lang="mnu-aba-arr"></span></a>
											</li>
											<li data-original-title="" class="tooltips lang" data-lang-tooltip="mnu-izq-der">
												<a data-action="LR" href="javascript:;"> <i class="fa fa-arrow-left"></i> <span class="lang" th:text="#{grafo_izquierda_derecha}" data-lang="mnu-izq-der"></span></a>
											</li>
											<li data-original-title="" class="tooltips lang" data-lang-tooltip="mnu-der-izq">
												<a data-action="RL" href="javascript:;"> <i class="fa fa-arrow-right"></i> <span class="lang" th:text="#{grafo_derecha_izquierda}" data-lang="mnu-der-izq"></span></a>
											</li>
											<li data-original-title="" class="tooltips lang" data-lang-tooltip="mnu-recarga">
												<a data-action="default" href="javascript:;"> <i class="fa fa-refresh"></i> <span class="lang" th:text="#{grafo_recargar}" data-lang="mnu-recarga"></span></a>
											</li>
										</ul>
									</div>
									<button id="btn-graphInfo" th:text="#{grafo_informacion}" th:title="#{grafo_descripcion}" class="btn btn-primary btn-sm button_text"></button>
								</div>
							</div>
							<div id="graphporlet" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 panel margin-bottom-20">				
								<div id="networkVis" class="bg-grey-cararra" style=" padding:10px; border: 1px dashed rgb(204, 204, 204);" ></div>
								<div id="infoporlet" class="pull-right bg-white" style="background-color:white;">
									<table id ="TableInfoNetwork" class="table table-condensed table-hover table-striped table-light"></table>
								</div>				
							</div>																	
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- END GRAPH INNER -->
	
			
	<!-- GRAPH DATA TO SEND TO GRAPH CONTROLLER  --> 
	<script type="text/javascript" th:inline="javascript"> 
				
		var graphJson = {
			"propertyCol" 	: [[#{grafo_tabla_propiedades}]],
			"valueCol"		: [[#{grafo_tabla_valor}]],
			"tableName"		: [[#{grafo_tabla_nombre}]],
			"tableSource"	: [[#{grafo_tabla_source}]],
			"tableLinkS"	: [[#{grafo_tabla_enlaceS}]],
			"tableLinkC"	: [[#{grafo_tabla_enlaceC}]],
			"tableLinkBtn"	: [[#{grafo_tabla_enlace_acceder}]],
			"data":[
				{
				"source": "USUARIO",
				"target": "USUARIO",
				"classSource": "USUARIO",
				"classTarget": "USUARIO",
				"nameSource": "colaborador",
				"nameTarget": "colaborador"
				},
				{
				"source": "USUARIO",
				"target": "ONTOLOGIAS",
				"linkTarget": "https://s4cities-sf2.northeurope.cloudapp.azure.com/console/ontologias/list",
				"classSource": "USUARIO",
				"classTarget": "ONTOLOGIAS",
				"title": "Una Ontología (Ontología en terminología Sofia2) representa el Modelo de Dominio que maneja una ThinKP. Las Ontologías se representan en JSON y pueden representar un modelo básico (como si fuera una Tabla) o un modelo complejo con relaciones (como si tuviésemos un conjunto de tablas relacionadas). Cuando un Dispositivo (ThinKP) envía una medida hablamos de Instance (Instancia de Ontología). Las Ontologías pueden crearse de diversas formas: visualmente en un diagrama de clases UML, a través de un esquema JSON o XML, campo a campo o a partir de un CSV/XLS.",
				"linkCreate": "https://s4cities-sf2.northeurope.cloudapp.azure.com/console/ontologias/create",
				"nameSource": "colaborador",
				"nameTarget": "ONTOLOGÍAS",
				"type": "suit"
				},
				{
				"source": "USUARIO",
				"target": "KPS",
				"linkTarget": "https://s4cities-sf2.northeurope.cloudapp.azure.com/console/kps/list",
				"classSource": "USUARIO",
				"classTarget": "KPS",
				"title": "Un Dispositivo (en terminología Sofia2 hablamos de KP: Knowledge Processor o de ThinKP) representa a cada uno de los elementos que interactúan con la plataforma, bien publicando, o bien consumiendo información. Un ThinKP puede representar desde un dispositivo sencillo (un Arduino o un iBeacon) a un Gateway (una Raspberry) o un Sistema Empresarial (Backend Java). Un ThinKP puede manejar una o varias Ontologías.",
				"linkCreate": "https://s4cities-sf2.northeurope.cloudapp.azure.com/console/kps/create",
				"nameSource": "colaborador",
				"nameTarget": "THINKPS",
				"type": "suit"
				},
				{
				"source": "KPS",
				"target": "44ca4895-b23e-4819-b464-bf05d2a13b0f",
				"linkSource": "https://s4cities-sf2.northeurope.cloudapp.azure.com/console/kps/list",
				"linkTarget": "https://s4cities-sf2.northeurope.cloudapp.azure.com/console/kps/44ca4895-b23e-4819-b464-bf05d2a13b0f",
				"classSource": "KPS",
				"classTarget": "kp",
				"nameSource": "THINKPS",
				"nameTarget": "GTKP-colaborador",
				"type": "licensing"
				},
				{
				"source": "USUARIO",
				"target": "VISUALIZACION",
				"classSource": "USUARIO",
				"classTarget": "VISUALIZACION",
				"title": "Las Herramientas de Visualización me permiten explotar de forma sencilla y gráfica la información almacenada dentro de la Plataforma (Ontologías). Puedo crear elementos de visualización unitaria (Gadgets), unirlos en una página web (Dashboard) o incluso crear complejos sinópticos al estilo SCADA representando la evolución de las señales (Instances).",
				"nameSource": "colaborador",
				"nameTarget": "VISUALIZACIONES",
				"type": "suit"
				},
				{
				"source": "VISUALIZACION",
				"target": "GADGETS",
				"linkTarget": "https://s4cities-sf2.northeurope.cloudapp.azure.com/console/gadget/list",
				"classSource": "VISUALIZACION",
				"classTarget": "GADGETS",
				"linkCreate": "https://s4cities-sf2.northeurope.cloudapp.azure.com/console/gadget/selectWizard",
				"nameSource": "VISUALIZACIONES",
				"nameTarget": "GADGETS",
				"type": "suit"
				},
				{
				"source": "VISUALIZACION",
				"target": "DASHBOARDS",
				"linkTarget": "https://s4cities-sf2.northeurope.cloudapp.azure.com/console/dashboard/list",
				"classSource": "VISUALIZACION",
				"classTarget": "DASHBOARDS",
				"linkCreate": "https://s4cities-sf2.northeurope.cloudapp.azure.com/console/dashboard/creategroup?",
				"nameSource": "VISUALIZACIONES",
				"nameTarget": "DASHBOARDS",
				"type": "suit"
				}
			]
		};
		// LOAD DATA TO USE IN GRAPHCONTROLLER
		// GRAPH CONTROLLER LOAD AND INIT ITSELF
	</script>
</div>
<!-- END GRAPH -->