{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Alert",
    "type": "object",
    "required": [
        "Alrt"
    ],
    "properties": {
        "Alrt": {
            "type": "string",
            "$ref": "#/datos"
        }
    },
    "datos": {
        "type": "object",
        "required": ["alertId","alertSource","alertTimestamp","assetId","assetType","assetSource","source","sourceAlertId","subject","infoSender"],
        "properties": {
            "alertId":{
                        "type":"string"
            },
            "alertSource":{
                   "type":"string"          
            },
            "alertTimestamp" :{
                "type": "object",
                    "required": [ "$date"],
                    "properties": {
                        "$date": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    "additionalProperties": false
            },
             "assetId": {
                        "type": "string"
             },
               "assetType":{
                        "type": "string"
               },
               "assetSource":{
                        "type": "string"
              },
              "assetName":{
                        "type": "string"
              },
             "source":{
                        "type":"string"
                   },
                "sourceAlertId":{
                        "type":"string"
                   },
                   "subject":{
                        "type":"string"
                   },
                   "description":{
                        "type":"string"
                   },
                  
                   "type":{
                        "type":"string",
                        "enum": ["ALARM", "WARNING", "MESSAGE", "NOTIFICATION", "INFO"]
                   },
                   "status":{
                        "type":"string",
                        "enum": ["OPEN", "CLOSED", "UNKNOWN"]
                   },
                  "affectedLocations":{
                    "type":"array",
                    "items":{
                        "type":"object",
                        "properties":{
                            "desc":{
                                "type":"string"
                            },
                            "geometry":{
                                "type": "object",
                                "oneOf":[
                                    {"$ref":"#/point"},
                                    {"$ref":"#/linestring"},
                                    {"$ref":"#/polygon"}
                                ]
                            },
                            "locationUri":{
                                "type":"string"
                            }
                        },
                        "additionalProperties": false
                    }
                  },
            "infoAction":{
                        "type":"string",
                        "enum":["CREATE","CLOSE","UPDATE","ACK","FOLLOW","SCALATION","REMINDER","CANCEL"]
                    },
                    "infoSender":{
                        "type":"string"
                    },
                    "infoContact":{
                        "type":"string"
                    },
                    "infoDesc":{
                        "type":"string"
                    },
                    "infoParams":{
                        "type":"string"
                    },
                    "infoUrgency":{
                        "type":"string",
                        "enum":["EXPECTED","FUTURE","INMEDIATE","PAST","UNKNOWN"]
                    },
                    "infoSeverity":{
                        "type":"string",
                        "enum":["EXTREME","MINOR","MODERATE","SEVERE","UNKNOWN"]
                    },
                    "infoCertainty":{
                        "type":"string",
                        "enum":["LIKELY","OBSERVED","POSSIBLE","UNLIKELY","UNKNOWN"]
                    },
                    "resources":{
                        "type":"object",
                        "required":["name","uri"],
                        "properties":{
                            "name":{
                                "type":"string"
                            },
                            "description":{
                                "type":"string"
                            },
                            "uri":{
                                "type":"string"
                            },
                            "mimeType":{
                                "type":"string"
                            }
                        },
                        "additionalProperties":false
                    }
                    },
                    "additionalProperties":false
    },
    "point":{
        "type":"object",
        "required": [ "coordinates","type" ],
        "properties": {
            "coordinates":{
                 "type":"array",
                 "items":[
                      {
                         "type":"number",
                         "maximum": 90,
                         "minimum": -90  
                      },
                      {
                          "type":"number",
                          "maximum": 180,
                          "minimum": -180 
                       }                          
                    ],
                    "minItems":2,
                    "maxItems":2
                  },
                  "type":{
                        "type":"string",
                        "enum":["Point"]
                  } 
        },
        "additionalProperties":false
    },
    "linestring":{
        "type":"object",
        "required": [ "coordinates","type" ],
        "properties": {
            "coordinates":{
                 "type":"array",
                 "items":{
                    "type":"array",
                    "items":[
                      {
                         "type":"number",
                         "maximum": 90,
                         "minimum": -90  
                      },
                      {
                          "type":"number",
                          "maximum": 180,
                          "minimum": -180 
                       }                          
                    ],
                    "minItems":2,
                    "maxItems":2
                 },
                 "minItems":2
            },
            "type":{
                        "type":"string",
                        "enum":["LineString"]
                  }
        },
        "additionalProperties":false        
    },
    "polygon":{
    "type":"object",
        "required": [ "coordinates","type"],
        "properties": {
            "coordinates":{
                 "type":"array",
                 "items":{
                    "type":"array",
                    "items":[
                        {
                         "type":"number",
                         "maximum": 90,
                         "minimum": -90  
                      },
                      {
                          "type":"number",
                          "maximum": 180,
                          "minimum": -180 
                       }  
                    ],
                     "minItems":3
                 }
            },
            "type":{
                        "type":"string",
                        "enum":["Polygon"]
                  }
        },
        "additionalProperties":false
    }
}